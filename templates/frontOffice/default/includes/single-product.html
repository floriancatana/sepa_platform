<li class="item {$colClass|default:"col-md-3"} col-md-5th col-xs-6"> 
    {if $PSE_COUNT > 1}
        {assign var="hasSubmit" value = false}
    {else}
        {assign var="hasSubmit" value = true}
    {/if}
    {assign var="productTitle" value="{$TITLE}"}
	{if not $product_id}
	   {assign var="product_id" value=$ID}
	{/if}
    <article class="row" itemscope itemtype="http://schema.org/Product">
		
		{hook name="singleproduct.top" product="{$product_id}"}

        <a href="{$URL nofilter}" itemprop="url" tabindex="-1" class="product-image{if $hasQuickView == true} product-quickview{/if} col-xs-3">
            {loop name="product_thumbnail" type="image" product=$product_id width="{$width}" height="{$height}" resize_mode="borders" limit="1"}
                <img itemprop="image" src="{$IMAGE_URL nofilter}" class="img-responsive" alt="{$productTitle}">
            {/loop}
            {elseloop rel="product_thumbnail"}
                <img itemprop="image" src="{image file='assets/dist/img/218x146.png'}" class="img-responsive" alt="{$productTitle}">
            {/elseloop}
        </a>

        <div class="product-info col-xs-3">
            <h2 class="name"><a href="{$URL nofilter}"><span itemprop="name">{$productTitle}</span></a></h2>
            <!-- {if $hasDescription}
            <div class="description" itemprop="description">
                <p>{$DESCRIPTION nofilter}</p>
            </div>
            {/if} -->
        </div>

        {* Stock *}
        {assign var="current_stock_content" value = "in_stock"}
        {assign var="current_stock_href" value = "http://schema.org/InStock"}
        {if {config key="check-available-stock"} != 0}
            {if $VIRTUAL == 0 && $QUANTITY <= 0}
                {assign var="current_stock_content" value = "out_stock"}
                {assign var="current_stock_href" value = "http://schema.org/OutOfStock"}
            {/if}
        {/if}

        <div class="product-price col-xs-3">
            <div class="price-container row" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
                <meta itemprop="category" content="{category attr="title"}">
                {* List of condition : NewCondition, DamagedCondition, UsedCondition, RefurbishedCondition *}
                <meta itemprop="itemCondition" itemscope itemtype="http://schema.org/NewCondition">
                {* List of currency : The currency used to describe the product price, in three-letter ISO format. *}
                <meta itemprop="priceCurrency" content="{currency attr="symbol"}">
                <link itemprop="availability" href="{$current_stock_href}" content="{$current_stock_content}" />
                {if $IS_PROMO }

                    {assign var="combination_count" value={count type="product_sale_elements" promo="1" product=$ID}}
                    <span class="special-price  {if $SHOW_ORIGINAL_PRICE} col-xs-6 {else} col-xs-12 {/if} "><span itemprop="price" class="price-label">{intl l="Special Price:"} </span><span class="price">
                        {if $combination_count > 1}
                            {intl l="From %price" price={format_money number=$BEST_TAXED_PRICE}|replace:'.':','}
                        {else}
                            {{format_money number=$BEST_TAXED_PRICE}|replace:'.':','}
                        {/if}
                    </span></span>
                    {if $SHOW_ORIGINAL_PRICE}
                    <span class="old-price col-xs-6"><span class="price-label">{intl l="Regular Price:"} </span><span class="price">{{format_money number=$TAXED_PRICE}|replace:'.':','}</span></span>
                    {/if}
                {else}
                    <span class="regular-price col-xs-12"><span itemprop="price" class="price">{{format_money number=$BEST_TAXED_PRICE}|replace:'.':','}</span></span>
                {/if}
            </div>
        </div>
		
		<div class="product-rating col-xs-3">
			<div class="cart-rating">
                    {if $breadcrumbs[0].title || $smarty.get.category_id || $smarty.get.q}
	                {$rating={meta meta="COMMENT_RATING" key="product" id="$ID"}}
	                {function name=comment_stars empty=1}
	                    {$star='<span class="glyphicon glyphicon-star"></span>'}
	                    {$star_empty='<span class="glyphicon glyphicon-star-empty"></span>'}
	
	                    {for $foo=0 to 4}
	                        {if $value > $foo}
	                            {$star nofilter}
	                        {elseif $empty == 1}
	                            {$star_empty nofilter}
	                        {/if}
	                    {/for}
	                {/function}
	                <p>
	                    <b>{$rating}</b> <span class="text-primary">{comment_stars value=$rating}</span>
	                </p> 
	            {/if}
	            
	            {ifhook rel="product.cart-wish"}
			    	{hook name="product.cart-wish" product_id="{$ID}" virtual="{$VIRTUAL}" quantity="{$QUANTITY}" pse_count="{$PSE_COUNT}" pse="{$PRODUCT_SALE_ELEMENT}" type_products="offer"}
				{/ifhook}
			</div>
		</div>
        {hook name="singleproduct.bottom" product={$product_id}}

    </article><!-- /product -->
    
</li>
